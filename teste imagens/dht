#include<Arduino.h>
#include<Wire.h>
#include<MicroLCD.h>
#include"DHT.h"

#define dhtPin 3
#define dhtType DHT11

const int pino = A0;
int valor;
float temp, hic, h;

LCD_SSD1306 lcd;
DHT dht(dhtPin, dhtType);

const PROGMEM uint8_t sol[40*40/8] = {
0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0xFC, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0,
0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03,
0x07, 0x0E, 0x1C, 0x98, 0xC0, 0xE0, 0x70, 0x30, 0x38, 0x18, 0x1B, 0x1B, 0x18, 0x38, 0x30, 0x70,
0xE0, 0xC0, 0x98, 0x1C, 0x0E, 0x07, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x7E, 0xFF, 0xC3, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC3, 0xFF, 0x7E, 0x00, 0x18, 0x18, 0x18,
0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0,
0xE0, 0x70, 0x38, 0x19, 0x03, 0x07, 0x0E, 0x0C, 0x1C, 0x18, 0xD8, 0xD8, 0x18, 0x1C, 0x0C, 0x0E,
0x07, 0x03, 0x19, 0x38, 0x70, 0xE0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x3F, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03,
0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
};

const PROGMEM uint8_t gota[40*40/8] = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xE0, 0xE0,
0x1C, 0x1C, 0x1C, 0x03, 0x03, 0x1C, 0x1C, 0x1C, 0xE0, 0xE0, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8,
0xF8, 0xF8, 0x07, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x07, 0x07, 0x07, 0xF8, 0xF8, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0xFE, 0xFE, 0xFE, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01,
0x01, 0xFE, 0xFE, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x7F, 0x7F, 0x80,
0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x7F, 0x7F, 0x7F, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x1C, 0x1C, 0x1C, 0xE0, 0xE0, 0xE0,
0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0x1C, 0x1C, 0x1C, 0x03, 0x03,
0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
};


void setup() {
  lcd.begin();
  lcd.setFontSize(FONT_SIZE_MEDIUM);
  lcd.print("Lendo...");
  dht.begin();
  delay(2000);
}

void loop() {
  valor = analogRead(pino);
  temp = dht.readTemperature();
  h = dht.readHumidity();
  hic = dht.computeHeatIndex(temp, h, false);
  lcd.clear();
  lcd.setCursor(10, 1);
  lcd.draw(sol, 40, 40);
  lcd.setCursor(60, 3);
  lcd.printLong(hic);
  lcd.print("C");
  delay(2000);
  lcd.clear();
  lcd.setCursor(10, 1);
  lcd.draw(gota, 40, 40);
  lcd.setCursor(60, 3);
  lcd.printLong(valor);
  //lcd.print("%");
  delay(2000);
  //lcd.clear();
  //lcd.print("U. Ar: ");
  //lcd.printLong(h);
  //delay(2000);
  //lcd.clear();
  //lcd.print("Temp: ");
  //lcd.printLong(hic);
  //delay(2000);
}
